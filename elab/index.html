<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>CMS e-Lab</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <link href="../assets/css/bootstrap.css" rel="stylesheet">
    <link href="../assets/css/bootstrapSwitch.css" rel="stylesheet">
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.1/themes/base/jquery-ui.css"/>

    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the bottom of the topbar */
      }

      .placeholder {
        width: 758px; 
        height: 380px; 
        margin-bottom: 26px; 
        margin-left: 26px; 
        padding: 0px; 
        position: center;
        border: 1px;
      }

      .plot-controls {
        position: center;
      }

      .title {
        width: 758px; 
        height: 16px;
        padding-left: 48px;
      }

      .xlabel {
        position: absolute; 
        left: 400px; 
        bottom: -24px;
      }

      .ylabel {
        position: absolute; 
        left: -50px; 
        top: 200px;
        writing-mode: tb-rl; 
        filter: flipV flipH; 
        -webkit-transform: rotate(-90deg); 
        -moz-transform: rotate(-90deg);
      }

      .switch span.switch-primary, .switch span.switch-left {
        background: -moz-linear-gradient(bottom , #6D84A2, #A8B6CA);
        background-image: -webkit-linear-gradient(bottom , #6D84A2, #A8B6CA);
        color: white;
      }

      .btn.active {
        background-color: #A8B6CA;
      }

      .mini-layout {
        border: 1px solid rgba(0, 0, 0, 0.2);
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        border-radius: 6px 6px 6px 6px;
        height: 300px;
        background-color: #f5f5f5;
        width: 100%;
      } 

      img:hover {
        border: 3px solid #f5dcc5;
      } 

      .plot {
        border: 1px dashed #cccccc; 
      }

    </style>

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->

    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!--<link rel="shortcut icon" href="./assets/ico/favicon.ico">-->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../assets/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../assets/ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../assets/ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="../assets/ico/apple-touch-icon-57-precomposed.png">
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="http://www.i2u2.org">I2U2</a>
          
          <div class="nav-collapse collapse">
            <ul class="nav">
              <li><a href="../index.html"><i class="icon-home icon-white"></i> CMS e-Lab Home</a></li>
              <li class="active"><a href="#"><i class="icon-road icon-white"></i> Explore</a></li>
            </ul>
          </div>

        </div>
      </div>
    </div>   

    <div class="container" id="main">
    <!-- This is where all the content goes.
         We have three (for now) containers:
         - datasets
         - parameters
         - plots
    -->

    <div class="container" id="datasets">

    <script type="text/template" id="dataset-page">
      <ul class="breadcrumb">
      <li class="active">Select dataset</li>
      </ul>
      
      <ul class="nav nav-tabs">
      <li class="active"><a data-target="#dataset-views" data-toggle="tab">Datasets</a></li>
      <li><a data-target="#dataset-information" data-toggle="tab"><i class="icon-question-sign"></i> Information</a></li>
      </ul>

      <div class="tab-content">
      <div class="container tab-pane" id="dataset-views"></div>
      <div class="container tab-pane" id="dataset-information">
      <ul>
      <li><a href="http://pdglive.lbl.gov/Rsummary.brl?nodein=S003&exp=Y&inscript=Y&sub=Yr&return=S003,S004,S035">electron</a></li>
      <li><a href="http://pdglive.lbl.gov/Rsummary.brl?nodein=S004&exp=Y&inscript=Y&sub=Yr&return=S003,S004,S035">muon</a></li>
      <li><a href="http://pdglive.lbl.gov/Rsummary.brl?nodein=M070&exp=Y&inscript=Y&sub=Yr&return=MXXX025">J/&#0968</a></li>
      <li><a href="http://pdglive.lbl.gov/Rsummary.brl?nodein=S044&exp=Y">Z</a></li>
      <li><a href="http://pdglive.lbl.gov/Rsummary.brl?nodein=S043&exp=Y">W</a></li>
      <li><a href="http://pdglive.lbl.gov/Rsummary.brl?nodein=S066&exp=Y">neutrinos</a></li>
      </ul>
      </div>
      </div>
    </script>

    <script type="text/template" id="dataset-list">
      <h3>The following datasets are available:</h3>
      <ul class="datasets">
      <% _.each(datasets, function(dataset) { %>
        <li><%= dataset.description %></li>
      <% }); %>
      </ul>
    </script>

    <script type="text/template" id="dataset-images">
      <h3>Click on a diagram below to access the data:</h3>
      <% _.each(datasets, function(dataset) { %>
        <a class='dataset-image' href='#/parameters/<%= dataset.name %>' >
        <img rel='popover' src=<%= dataset.image %> class='<%= dataset.type %> img-rounded img-polaroid'></img>
        </a>
      <% }); %>
    </script>
    
    </div>
    
    <div class="container" id="parameters">

    <script type="text/template" id="parameter-page">
      <ul class="breadcrumb">
      <li class="active">Select dataset<span class="divider">/</span></li>
      <li class="active">Select parameter</li>
      </ul>
      
      <ul class="nav nav-tabs">
      <li class="active"><a data-target="#parameter-buttons" data-toggle="tab">Parameters</a></li>
      <li><a data-target="#parameter-information" data-toggle="tab"><i class="icon-question-sign"></i> Information</a></li>
      </ul>

      <div class="tab-content">
      <div class="container tab-pane" id="parameter-buttons"></div>
      <div class="container tab-pane" id="parameter-information"></div>
      </div>
    </script>

    <script type="text/template" id="parameter-buttons-template">
      <h3>Select one or more parameters:</h3>

      <% _.each(parameters, function(parameter) { %>
      <button type='button' data-toggle='button' id=<%= parameter.name %> class='btn btn-large parameter-select'><%= parameter.name %></button>
      <% }); %>
         
      <p>
      <div class="row-fluid">
      <div class="span2">         
      <a href="#/plots/" class="btn btn-block">Plot parameter(s) <i class="icon-chevron-right"></i></a>
      </div>
      </div>
      </p>
    </script>
      
    <script type="text/template" id="parameters-table-template">
      <table rel="popover" id="parameter-table" class="table table-bordered table-striped">
      <thead>
      <tr>
      <th>Name</th>
      <th>Unit</th>
      <th>Description</th>
      </tr>
      </thead>
      <tbody id="parameter-body"></tbody>
      </table>
    </script>

    <script type="text/template" id="parameter-row-template">
      <tr>
      <td><%= parameter.name %></td>
      <td><%= parameter.unit %></td>
      <td><%= parameter.description %></td>
      </tr>
    </script>
    </div> 

    <div class="container" id="plots">

    <script type="text/template" id="plot-page-template">
      <ul class="breadcrumb">
      <li class="active">Select dataset  <span class="divider">/</span></li>
      <li class="active">Select parameter<span class="divider">/</span></li>
      <li class="active">Plot parameter</li>
      </ul>

      <ul class="nav nav-tabs">
      <li class="active"><a data-target="#plot-views" data-toggle="tab">Plots</a></li>
      <li><a data-target="#plot-information" data-toggle="tab"><i class="icon-question-sign"></i> Information</a></li>
      </ul>

      <div class="tab-content">
      <div class="container tab-pane" id="plot-views"></div>
      <div class="container tab-pane" id="plot-information"></div>
      </div>
    </script>

    <script type="text/template" id="plot-template">
      <div id="<%= plot.title %>">  
      <div class="plot">

      <div class="plot-controls">
      <table>
      <tr>

      <td>
      <form class="navbar-form pull-left">
      Y Max:
      <input type="text" class="span1">
      <button type="button" id="ymax" class="btn">Set</button>
      </form>
      </td>

      <td><span class="span1"></td>

      <td>
      <button type="button" class="btn" id="logx" data-toggle="button">Log X</button>
      <button type="button" class="btn" id="logy" data-toggle="button">Log Y</button>
      </td>

      <td><span class="span1"></td>

      <td>
      <form class="navbar-form pull-left">
      Bin Width:
      <input type="text" class="span1">
      <button type="submit" id="binwidth" class="btn">Set</button>
      </form>
      </td>

      </tr>
      </table>
      </div>

      <div class="title"></div>
      <div class="placeholder"></div>
    
      </div>
      </div>
    </script>

    </div> <!-- End of plots div -->

    </div> <!-- End of full container -->

    <script src="../assets/js/jquery.js"></script>
    <script src="../js/bootstrapSwitch.js"></script>

    <script src="../assets/js/bootstrap-transition.js"></script>
    <script src="../assets/js/bootstrap-alert.js"></script>
    <script src="../assets/js/bootstrap-modal.js"></script>
    <script src="../assets/js/bootstrap-dropdown.js"></script>
    <script src="../assets/js/bootstrap-scrollspy.js"></script>
    <script src="../assets/js/bootstrap-tab.js"></script>
    <script src="../assets/js/bootstrap-tooltip.js"></script>
    <script src="../assets/js/bootstrap-popover.js"></script>
    <script src="../assets/js/bootstrap-button.js"></script>
    <script src="../assets/js/bootstrap-collapse.js"></script>
    <script src="../assets/js/bootstrap-carousel.js"></script>
    <script src="../assets/js/bootstrap-typeahead.js"></script>
      
    <script src="../js/underscore-min.js"></script>
    <script src="../js/backbone-min.js"></script>
    <script src="../js/jquery.flot.js"></script>

    <script src="../js/models.js"></script>
    <script src="../js/views.js"></script>
    <script src="../js/routers.js"></script>
    <script src="../js/elab.js"></script>
   
    <script type="text/javascript">
        $(".parameter-select").click(function() {
          var pid = $(this).attr('id');
          var selected = ! $(this).hasClass('active');

          console.log(pid, selected);

          var dataset = datasets.getSelected().at(0);
          dataset.get('parameters').get(pid).set('selected', selected);
        });
    </script>

  </body>
</html>
